<link rel="import" href="../basic-selector.html">

<polymer-element name="basic-accessible-list" extends="basic-selector">
<script>
Polymer({

  // get selectedItem() {
  //   // HACK: See setter.
  //   var superSelectedItem = Object.getOwnPropertyDescriptor(this.__proto__.__proto__, 'selectedItem').get;
  //   return superSelectedItem.call(this);
  // },

  // set selectedItem(item) {
  //   console.log("basic-accessible-list: set selectedItem");
  //   var previousItem = this.selectedItem;
  //   if (previousItem) {
  //     previousItem.
  //   }
  //   // HACK: Can we get Polymer's super to handle a base class's getter/setter?
  //   var superSelectedItem = Object.getOwnPropertyDescriptor(this.__proto__.__proto__, 'selectedItem').set;
  //   superSelectedItem.call(this, item);
  // }

  _applySelection: function(item, selected) {
    // Should invoke base + target's _applySelection somehow, while avoiding
    // recursive loop.
    item.setAttribute('aria-selected', selected);
  },

  ready: function() {
    // HACK: Shouldn't need to wire this up.
    this.addEventListener('selected-item-changed', function(event) {
      console.log("basic-accessible-list: selected-item-changed");
      var previousItem = event.detail.previousItem;
      if (previousItem) {
        this._applySelection(previousItem, false);
      }
      var selectedItem = event.detail.selectedItem;
      if (selectedItem) {
        this._applySelection(selectedItem, true);
      }

    }.bind(this));
  }

});
</script>
</polymer-element>
