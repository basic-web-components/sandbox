<link rel="import" href="../basic-selector.html">

<polymer-element name="basic-selector-stage" extends="basic-selector">
<template>
  <style>
  :host {
    display: block;
    /*touch-action: none;*/
  }
  </style>
  <content></content>
</template>
<script>
Polymer({

  contentChanged: function() {
    var children = this.flattenChildren;
    if (children.length === 0) {
      return;
    }
    var item = children[0];
    this.player = item.animate([
      { opacity: 0.5 },
      { opacity: 1.0 },
      { opacity: 0.5 }
    ], {
      duration: 1000,
    });
    this.player.pause();
  },

  ready: function() {
    this.addEventListener('mousemove', function(event) {
      this._track(event.offsetX);
    }.bind(this));
    this.addEventListener('touchmove', function(event) {
      var offsetX = event.changedTouches[0].clientX - this.offsetLeft;
      this._track(offsetX);
      event.preventDefault();
    }.bind(this));
  },

  _track: function(x) {
    var fraction = x / this.clientWidth;
    var player = this.player;
    var duration = 1000; // HACK
    // var duration = player.source.timing.duration;
    var time = fraction * duration;
    this.player.currentTime = time;
  }

});
</script>
</polmer-element>
