<link rel="import" href="../polymer/polymer.html">

<polymer-element name="basic-fractional-selection">
<script>
Polymer({

  next: function() {
    var index = Math.floor(this.selectedIndex) + 1;
    this.snap(index);
  },

  publish: {
    maximum: {
      reflect: true,
      value: null
    },
    minimum: {
      reflect: true,
      value: 0
    },
    selectedIndex: {
      reflect: false,
      value: 0
    }
  },

  maximumChanged: function() {
    this._selectIndexWithinBounds(this.selectedIndex);
  },

  minimumChanged: function() {
    this._selectIndexWithinBounds(this.selectedIndex);
  },

  previous: function() {
    var index = Math.ceil(this.selectedIndex) - 1;
    this.snap(index);
  },

  setSelectedIndex: function(index) {
    this.selectedIndex = index;
  },

  // Set the selectedIndex to the given value, ensuring it is within any
  // currently-specified minimum and maximum.
  _selectIndexWithinBounds: function(index) {
    if (this.minimum != null) {
      index = Math.max(index, this.minimum);
    }
    if (this.maximum != null) {
      index = Math.min(index, this.maximum);
    }
    // this.selectedIndex = index;
    this.setSelectedIndex(index);
    return index;
  },

  /*
   * Round to the nearest integer index within bounds.
   */
  snap: function(index) {
    index = index != null ?
      index :
      Math.round(this.selectedIndex);
    return this._selectIndexWithinBounds(index);
  }

});
</script>
</polmyer-element>
